# Code Racer

## Project URL

## Project Video URL

**Task:** Provide the link to your youtube video. Please make sure the link works.

## Project Description

Code Racer is an online annomynous web application where users can race against
each other to see who can type a code snippet out the fastest. Users are able
to create and join lobbies as spectators or players. Lobbies can also be shared
via URL. Once the game is started, players will race against each other by
typing the given code snippet as fast as possible. Spectators will be able to
see what each of the players are typing during the race. Lobbies and games will
be cleaned up regularly if there is inactivity.

## Development

We used Angular in the front end, express.js as the backened, and MySQL as the
database. We have main "Route" componnts that show represent each page and
used smaller components to help build the page. To call APIs, we created and
used a common API service that is called by other services to streamline the
API calls. The backend then receives and routes the calls to the correct
endpoints. Most of the logic and interactions with the database is done here.

This application has no log in feature but uses temporary sessions lasting 18
hours to identify you. It will automatically and randomly generate it for you
on your first API call. There are measures in place to make sure you can only
join/host 1 lobby.

Lobby syncing was done through long-polling.

Ingame syncing was done through WebRTC using the peer.js Library,
verification was checked in the frontend and doublechecked fully through APIs.

Regular cleanup of inactive pre-game lobbies happen every 15-30 minutes.
Regular cleanup of inactive ingame lobbies happen every 5-7 minutes.

Bootstrap used for styling.

## Deployment

We used a Virtual Machine from GoogleCloud to host our website. We saved our
IP address and we got a free student domain name from namecheap.com to point to
that IP address.

We dockerize the backend, frontend, database, and certbot before deploying it
on our production server. We just need to run the deploy.sh script and it will
build the images/frontend locally, push it to docker repo, and pull them back
onto the VM and restart it.

certbot or Let's Encript was used to get and renew our SSL certificate. Nginx
was used to host the static web files generated by angular's build.

## Challenges

**Task:** What is the top 3 most challenging things that you have learned/developed for you app? Please restrict your answer to only three items.

1. Deploying and Docker. I knew nothing, everything was new, nothing worked,
   VM kept crashing, went through several iterations like Apache2
2. WebRTC/Peer.js: How to coordinate connections, how to properly send data
   to sync up games
3. Angular Framework: Learning how components, services, observables, and animation 
   worked and how they were organized


